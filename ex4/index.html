<!DOCTYPE html>
<html>

<head>
    <title>BackboneJs</title>
</head>

<body>
    <div id="container">Loading...</div>
    <script type="text/template" id="mainTemplate">
        <% if (typeof(date) !== "undefined") { %>
            <h2>The date and time : <%= date %> </h2>
            <% } else { %>
                <h2> Date is not defined</h2>
                <% } %>
    </script>
    <script type="text/template" id="formTemplate">
        <label>Search</label>
        <input type="text" id="search_input" />
        <input type="button" id="search_button" value="Search" /> Results :
        <%- data %>
    </script>
    <!-- https://goo.gl/89lp0g -->
    <script src="https://code.jquery.com/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js" type="text/javascript"></script>
    <script type="text/javascript">
    var AppView = Backbone.View.extend({
        el: '#container',
        mainTemplate: $('#mainTemplate').html(),
        formTemplate: $('#formTemplate').html(),
        initialize: function() {
            this.render();
        },
        render: function() {
            // this.$el.html(_.template(this.mainTemplate, {
            //     date: new Date()
            // }));
            this.$el.html(_.template(this.formTemplate, {
                data: this.data || 'No results'
            }));
        },
        events: {
            "click input[type=button]": "doSearch"
        },
        doSearch: function() {
            console.log('... Searching...');
            //complicated processing
            this.data = 'This is response!! ' + (new Date());
            this.render();
        }
    });
    var appView = new AppView();
    </script>
</body>

</html>
